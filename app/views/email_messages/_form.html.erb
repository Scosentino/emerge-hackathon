<%= form_with(model: email_message, local: true) do |form| %>
  <% if email_message.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(email_message.errors.count, "error") %> prohibited this email_message from being saved:</h2>

      <ul>
      <% email_message.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :recipient_email %>
    <%= form.text_field :recipient_email, id: :email_message_recipient_email %>
  </div>

  <div class="field">
    <%= form.label :recipient_full_name %>
    <%= form.text_field :recipient_full_name, id: :email_message_recipient_full_name %>
  </div>

  <div class="field">
    <%= form.label :recipient_preferred_language %>
    <%= form.text_field :recipient_preferred_language, id: :email_message_recipient_preferred_language %>
  </div>

  <div class="field">
    <%= form.label :sender_full_name %>
    <%= form.text_field :sender_full_name, id: :email_message_sender_full_name %>
  </div>

  <div class="field">
    <%= form.label :sender_email %>
    <%= form.text_field :sender_email, id: :email_message_sender_email %>
  </div>

  <div class="field">
    <%= form.label :transcription %>
    <%= form.text_area :transcription, id: :email_message_transcription %>
  </div>

  <div class="field">
    <%= form.label :raw_video%>
    <%= form.hidden_field(:raw_video_cache)%>
    <%= form.file_field(:raw_video) %>
  </div>


  <div class="actions">
    <%= form.submit %>
  </div>

<% end %>
<script type="text/javascript">
  document.getElementById("upload_widget_opener").addEventListener("click", function() {
    cloudinary.openUploadWidget({ cloud_name: 'dflr0ohqs', upload_preset: 'raw_video', cropping: 'server', folder: "raw_video"},
      function(error, result) { console.log(error, result) });
  }, true);
</script>
